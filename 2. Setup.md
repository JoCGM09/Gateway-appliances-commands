# Configuración de ambiente en la nube

## Creación de Gateway Appliance Dallas 10
### Resource details
- Vendor: Juniper
- Version: 23.2R1-S1 (up to 1Gbps)
- License: Standard
- Hostname: gatewaydallas10pod1
- Domain: jose.guerra.ibm
### Location
- Location: Dallas 10
- Single Appliance
- Pod: dal10.pod01
### Service Profile
- Intel Xeon 4210
- RAM: 32 GB
- SSH Key: Add a key
### Network interface
- Interface: Public and private
- Port redundancy: Automatic

## Creación de Classic VSI Centos Dallas 10
### Public instance
- Type: Public
- Hostname: vsidal10
- Domain: jose.guerra.ibm
- Billing method: Monthly
- Location: Dallas 10
- Profile: Balanced | B1.2x4
### Operating System
- Vendor: Centos
- Version: Stream 9.x - Minimal Install (64 bit) - HVM
### Network Interface
- Uplink port speed: 100 Mbps rate-limited public & private network uplinks [$0.000]
- Public egress - bandwidth: 0GB
- Private VLAN: Auto assigned 

## Creación de VLAN del Gateway Appliance Dallas 10
- Seleccionar Classic -> Network -> Gateway Appliances
- Seleccionar gatewaydallas10pod1
- Seleccionar VLANs
- No habrán VLANs disponibles, seleccionar Create a Vlan

### Crear Premium Vlan
- Location: dal10pod01
- Network: Private
- Name: Vlan-private-dal10

> [!NOTE]
> Al habilitar VLAN Spanning o VRF las VLANs privadas del Gateway Appliance y la VSI se comunican nativamente.

## Conexión SSH al Gateway appliance
- En el Gateway Appliance seleccionar Overview
- En vSRX seleccionar la Public IP
- En un CLI ingresar el comando SSH y la contraseña del usuario root:
```go
❯ ssh root@169.46.36.61
The authenticity of host '169.46.36.61 (169.46.36.61)' can't be established.
(root@169.46.36.61) Password:
Last login: Fri Mar  1 04:33:49 2024 from 169.57.139.4
--- JUNOS 23.2R1-S1.6 Kernel 64-bit XEN JNPR-12.1-20230808.f5177d2_buil
root@gatewaydallas10pod1-vsrx-vSRX:~ #
```
## Probar conectividad privada
### Ping Juniper Dallas -> VSI Dallas
```go
root@gatewaydallas10pod1-vsrx-vSRX:~ # ping 10.95.37.239
PING 10.95.37.239 (10.95.37.239): 56 data bytes
64 bytes from 10.95.37.239: icmp_seq=0 ttl=61 time=1.256 ms
64 bytes from 10.95.37.239: icmp_seq=1 ttl=61 time=0.854 ms
64 bytes from 10.95.37.239: icmp_seq=2 ttl=61 time=0.850 ms
```
### Habilitar CLI
```go
root@gatewaydallas10pod1-vsrx-vSRX:~ # cli
root@gatewaydallas10pod1-vsrx-vSRX> 
```
### Entrar al modo configuración
```go
root@gatewaydallas10pod1-vsrx-vSRX> configure 
Entering configuration mode

[edit]
root@gatewaydallas10pod1-vsrx-vSRX# 
```
### Validar la configuración default
```go
[edit]
root@gatewaydallas10pod1-vsrx-vSRX# show interfaces 
...
ae0 {
    description PRIVATE_VLANs;
    flexible-vlan-tagging;
    native-vlan-id 1145;
    unit 0 {
        vlan-id 1145;
        family inet {
            address 10.176.84.169/26;
        }
    }
}
ae1 {
    description PUBLIC_VLAN;
    flexible-vlan-tagging;
    native-vlan-id 1198;
    unit 0 {
        vlan-id 1198;
        family inet {
            address 169.46.36.61/29;
        }
        family inet6 {
            address 2607:f0d0:1e01:0073:0000:0000:0000:0003/64;
        }                               
    }                                   
}
...
```

