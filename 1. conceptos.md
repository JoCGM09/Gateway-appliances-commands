# Conceptos
## VPN
Una red privada virtual es una conexión hacia uno o más sitios remotos que usan la red pública en lugar de conexiones dedicadas mediante conexiones virtuales enrutadas (tunelizadas).

## IPSec
IPsec es un protocolo, consiste en un conjunto de normas utilizadas para establecer la conexión de manera segura a través de una WAN pública.
La conexión VPN de tipo site-to-site fluye entre estos dos puntos pasa por recursos compartidos como routers o firewalls creando un túnel de seguridad también llamado IPSec.

## Tipos de VPN
### Por su topología
Algunos tipos de topologías VPN son:
#### Site-to-site VPN
Conecta únicamente dos puntos específicos y asegura la comunicación.
#### Hub-and-spoke VPN
Conecta y centraliza la red empresarial conectando "spokes" y centralizando el tráfico a través del "hub"
#### Client-to-site VPN
Conecta usuarios remotos a una red privada corporativa. 

### Por su configuración

#### PN basado en rutas 
Son usadas para realizar restricciones granulares en el tráfico como en una arquitectura hub-and-spoke o cuando es necesario configurar NAT en las interfaces, además permite crear reglas de tipo permitir y denegar. Permite también intercambiar información mediante enrutamiento dinámico habilitando, por ejemplo, interfaces con protocolo OSPF. Los túneles son considerados como el medio para enviar el tráfico y las políticas son métodos para permitir o denegarlo. Estas políticas se construyen considerando como un objeto al túnel junto al origen, destino, aplicación y acción. Los túneles están limitados por la cantidad de interfaces que soporte el dispositivo.

#### VPN basado en políticas
Son usadas para realizar una menor cantidad de políticas que hagan referencia al mismo túnel como en una arquitectura site-to-site o cuando no es necesario configurar NAT en cada par túnel-política crea una asociación IPSec. Cada política debe solo permitir y debe incluir al menos un túnel. Es recomendada cuando no se necesita realizar enturamiento dinámico y no se recomienda para aquitecturas hub-and-spoke.

## IKE
Internet key exchange es un protocolo seguro de gestión de llaves que se utiliza para la autenticación entre dos dispositivos. Negocia y gestiona parámetros, autentifica mutuamente el intercambio seguro de claves privadas entre pares mediante secretos compartidos y claves públicas proporcionando protección de identidad.

### Principales versiones
- IKE versión 1
- IKE Versión 2
Nota: Cuando se configura IKEv2 no se puede regresar a IKEv1.

#### Por qué usar IKEv2 sobre IKEv1
- Reduce la latencia para la configuración de IPsec y aumenta la velocidad de establecimiento de la conexión.
- Aumenta la robustez frente a ataques DOS.
- Mejora la fiabilidad mediante el uso de números de secuencia, acuses de recibo y corrección de errores. El iniciador IKEv2 es responsable de retransmitir si no recibe respuesta.

### Métodos de autenticación
#### Pre-shared-key (psk)
Es una contraseña que es la misma para ambas partes. Esta contraseña se intercambia por adelantado mediante llamada o algún otro mecanismo. Debe constar de al menos 8 caracteres (se recomienda 12 o más) utilizando una combinación de letras, números y caracteres alfanuméricos. Las partes se autentican mutuamente cifrando la clave precompartida con la clave pública del homólogo. Es la forma más común de establecer una conexión VPN.
#### Certificate-based authentication
Los certificados se componen de una clave pública y otra privada, y pueden estar firmados por un certificado primario conocido como autoridad de certificación (certificate authority o CA) Las partes comprueban los certificados para confirmar si están firmados por una CA de confianza. Son mucho más ideales en entornos a gran escala con numerosos sitios pares que no deben compartir todos una clave precompartida. Es la forma más segura de establecer una conexión VPN.